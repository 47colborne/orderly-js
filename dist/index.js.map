{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap 229160c5d2b50f15cb87","webpack:///./index.js","webpack:///./orderly.js","webpack:///./orderly/job.js","webpack:///./orderly/queue.js","webpack:///../~/fastpriorityqueue/FastPriorityQueue.js","webpack:///../~/webpack/buildin/module.js","webpack:///./orderly/worker.js","webpack:///./orderly/version_tracker.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","Orderly","filterSearchParams","url","replace","buildAbort","abort","buildVersion","version","undefined","_ret","next","versioning","inc","v","get","_typeof","buildCancel","isGoodRequest","_ref","status","buildJob","action","priority","_job2","responseStatus","resp","responseType","_this","type","length","_ref2","regeneratorRuntime","mark","_callee","body","wrap","_context","prev","sent","abrupt","_extends","stop","_x3","shouldCancel","cancel","cancelled","buildAction","options","fetch","ajax","queue","add","method","post","put","del","config","_queue2","debug","worker","_worker2","_version_tracker2","Object","defineProperty","assign","target","i","source","prototype","hasOwnProperty","Symbol","iterator","constructor","_job","_queue","_worker","_version_tracker","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","Job","_ref$priority","counter","log","job","console","callback","q","run","_fastpriorityqueue","_fastpriorityqueue2","Queue","_ref$strategy","strategy","__defaultStrategy__","size","poll","isEmpty","trim","_ref3","x","y","FastPriorityQueue","comparator","array","compare","defaultcomparator","a","b","myval","ap","heapify","arr","_percolateDown","_percolateUp","hsize","ai","l","r","bestc","peek","t","ans","slice","main","webpackPolyfill","deprecate","paths","children","Worker","_ref$sleep","sleep","_ref$max","max","start","available","hasJob","pending","dispatch","execute","cleanup","setTimeout","invoke","complete","func","VersionTracker","initValue","map","set"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Orderly\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Orderly\"] = factory();\n\telse\n\t\troot[\"Orderly\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Orderly\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Orderly\"] = factory();\n\telse\n\t\troot[\"Orderly\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(2);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _job = __webpack_require__(3);\n\t\n\tvar _job2 = _interopRequireDefault(_job);\n\t\n\tvar _queue = __webpack_require__(4);\n\t\n\tvar _queue2 = _interopRequireDefault(_queue);\n\t\n\tvar _worker = __webpack_require__(7);\n\t\n\tvar _worker2 = _interopRequireDefault(_worker);\n\t\n\tvar _version_tracker = __webpack_require__(8);\n\t\n\tvar _version_tracker2 = _interopRequireDefault(_version_tracker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\t\n\tfunction Orderly() {\n\t  var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\n\t  // ============================================\n\t  // initialize environment\n\t  // ============================================\n\t\n\t  var queue = new _queue2.default({ debug: config.debug });\n\t  var worker = new _worker2.default(queue, config);\n\t  var versioning = new _version_tracker2.default();\n\t\n\t  // ============================================\n\t  // Private Functions\n\t  // ============================================\n\t\n\t  function filterSearchParams(url) {\n\t    return ('' + url).replace(/\\?.*$/, '');\n\t  }\n\t\n\t  function buildAbort(abort) {\n\t    if (abort) return abort;\n\t  }\n\t\n\t  function buildVersion(url, version) {\n\t    if (version === undefined) version = true;\n\t\n\t    if (version) {\n\t      var _ret = function () {\n\t        var key = filterSearchParams(url);\n\t        var next = versioning.inc(key);\n\t\n\t        return {\n\t          v: function v() {\n\t            return versioning.get(key) === next;\n\t          }\n\t        };\n\t      }();\n\t\n\t      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t    }\n\t  }\n\t\n\t  function buildCancel(abort, url, version) {\n\t    abort = buildAbort(abort);\n\t    version = buildVersion(url, version);\n\t    return function () {\n\t      return version && !version() || abort && abort();\n\t    };\n\t  }\n\t\n\t  function isGoodRequest(_ref) {\n\t    var status = _ref.status;\n\t\n\t    return status >= 200 && status < 400;\n\t  }\n\t\n\t  function buildJob(action, priority) {\n\t    return new _job2.default({ action: action, priority: priority });\n\t  }\n\t\n\t  function responseStatus(reject) {\n\t    return function (resp) {\n\t      return isGoodRequest(resp) ? resp : reject(resp);\n\t    };\n\t  }\n\t\n\t  function responseType() {\n\t    var _this = this;\n\t\n\t    var type = arguments.length <= 0 || arguments[0] === undefined ? 'text' : arguments[0];\n\t\n\t    return function () {\n\t      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(resp) {\n\t        var body;\n\t        return regeneratorRuntime.wrap(function _callee$(_context) {\n\t          while (1) {\n\t            switch (_context.prev = _context.next) {\n\t              case 0:\n\t                _context.next = 2;\n\t                return resp[type]();\n\t\n\t              case 2:\n\t                body = _context.sent;\n\t                return _context.abrupt('return', _extends({}, resp, { body: body }));\n\t\n\t              case 4:\n\t              case 'end':\n\t                return _context.stop();\n\t            }\n\t          }\n\t        }, _callee, _this);\n\t      }));\n\t\n\t      return function (_x3) {\n\t        return _ref2.apply(this, arguments);\n\t      };\n\t    }();\n\t  }\n\t\n\t  function shouldCancel(cancel, reject) {\n\t    return function (resp) {\n\t      return cancel() ? reject(_extends({}, resp, { cancelled: true })) : resp;\n\t    };\n\t  }\n\t\n\t  function buildAction(url, options, resolve, reject) {\n\t    var abort = options.abort;\n\t    var type = options.type;\n\t    var version = options.version;\n\t\n\t    return function () {\n\t      return fetch(url, options).then(responseStatus(reject)).then(shouldCancel(buildCancel(abort, url, version), reject)).then(responseType(type)).then(resolve).catch(reject);\n\t    };\n\t  }\n\t\n\t  // ============================================\n\t  // Public Functions\n\t  // ============================================\n\t\n\t  function ajax(url) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t    var priority = options.priority;\n\t\n\t    return new Promise(function (resolve, reject) {\n\t      queue.add(buildJob(buildAction(url, options, resolve, reject), priority));\n\t    });\n\t  }\n\t\n\t  function get(url) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    return ajax(url, _extends({}, options, { method: 'GET' }));\n\t  }\n\t\n\t  function post(url) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    return ajax(url, _extends({}, options, { method: 'POST' }));\n\t  }\n\t\n\t  function put(url) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    return ajax(url, _extends({}, options, { method: 'PUT' }));\n\t  }\n\t\n\t  function del(url) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    return ajax(url, _extends({}, options, { method: 'DELETE' }));\n\t  }\n\t\n\t  return { ajax: ajax, get: get, post: post, put: put, del: del, versioning: versioning, queue: queue, worker: worker };\n\t}\n\t\n\texports.default = Orderly;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Job = function () {\n\t  _createClass(Job, [{\n\t    key: 'log',\n\t    value: function log(job, action) {\n\t      var id = job.id;\n\t      var priority = job.priority;\n\t\n\t      console.info('Orderly.Job: ' + action + ', id:' + id + ', priority:' + priority);\n\t    }\n\t  }], [{\n\t    key: 'invoke',\n\t    value: function invoke(job, callback) {\n\t      var q = job.run();\n\t\n\t      if (callback && typeof callback === 'function') q.then(callback);\n\t\n\t      return q;\n\t    }\n\t  }]);\n\t\n\t  function Job(_ref) {\n\t    var action = _ref.action;\n\t    var _ref$priority = _ref.priority;\n\t    var priority = _ref$priority === undefined ? 0 : _ref$priority;\n\t    var debug = _ref.debug;\n\t\n\t    _classCallCheck(this, Job);\n\t\n\t    this.id = Job.counter += 1;\n\t    this.action = action;\n\t    this.priority = priority;\n\t    this.debug = debug;\n\t\n\t    this.log(this, 'Constructed');\n\t  }\n\t\n\t  _createClass(Job, [{\n\t    key: 'run',\n\t    value: function run() {\n\t      if (this.debug) this.log(this, 'Invoking');\n\t      return this.action();\n\t    }\n\t  }]);\n\t\n\t  return Job;\n\t}();\n\t\n\tJob.counter = 0;\n\texports.default = Job;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _fastpriorityqueue = __webpack_require__(5);\n\t\n\tvar _fastpriorityqueue2 = _interopRequireDefault(_fastpriorityqueue);\n\t\n\tvar _job = __webpack_require__(3);\n\t\n\tvar _job2 = _interopRequireDefault(_job);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Queue = function () {\n\t  function Queue() {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var _ref$strategy = _ref.strategy;\n\t    var strategy = _ref$strategy === undefined ? this.__defaultStrategy__ : _ref$strategy;\n\t    var debug = _ref.debug;\n\t\n\t    _classCallCheck(this, Queue);\n\t\n\t    this.q = new _fastpriorityqueue2.default(strategy);\n\t    this.debug = debug;\n\t  }\n\t\n\t  _createClass(Queue, [{\n\t    key: 'add',\n\t    value: function add(obj) {\n\t      if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj.hasOwnProperty('action')) {\n\t        return this.q.add(obj);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get() {\n\t      if (this.debug) console.info('Orderly.Queue size: ', this.size());\n\t      return this.q.poll();\n\t    }\n\t  }, {\n\t    key: 'isEmpty',\n\t    value: function isEmpty() {\n\t      return this.q.isEmpty();\n\t    }\n\t  }, {\n\t    key: 'size',\n\t    value: function size() {\n\t      return this.q.size;\n\t    }\n\t  }, {\n\t    key: 'cleanup',\n\t    value: function cleanup() {\n\t      return this.q.trim();\n\t    }\n\t  }, {\n\t    key: '__defaultStrategy__',\n\t    value: function __defaultStrategy__(_ref2, _ref3) {\n\t      var x = _ref2.priority;\n\t      var y = _ref3.priority;\n\t\n\t      return x !== undefined && x > y;\n\t    }\n\t  }]);\n\t\n\t  return Queue;\n\t}();\n\t\n\texports.default = Queue;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {/**\n\t * FastPriorityQueue.js : a fast heap-based priority queue  in JavaScript.\n\t * (c) the authors\n\t * Licensed under the Apache License, Version 2.0.\n\t *\n\t * Speed-optimized heap-based priority queue for modern browsers and JavaScript engines.\n\t *\n\t * Usage :\n\t         Installation (in shell, if you use node):\n\t         $ npm install fastpriorityqueue\n\t\n\t         Running test program (in JavaScript):\n\t\n\t         // var FastPriorityQueue = require(\"fastpriorityqueue\");// in node\n\t         var x = new FastPriorityQueue();\n\t         x.add(1);\n\t         x.add(0);\n\t         x.add(5);\n\t         x.add(4);\n\t         x.add(3);\n\t         x.peek(); // should return 0, leaves x unchanged\n\t         x.size; // should return 5, leaves x unchanged\n\t         while(!x.isEmpty()) {\n\t           console.log(x.poll());\n\t         } // will print 0 1 3 4 5\n\t         x.trim(); // (optional) optimizes memory usage\n\t */\n\t'use strict';\n\t\n\tvar defaultcomparator = function defaultcomparator(a, b) {\n\t    return a < b;\n\t};\n\t\n\t// the provided comparator function should take a, b and return *true* when a < b\n\tfunction FastPriorityQueue(comparator) {\n\t    this.array = [];\n\t    this.size = 0;\n\t    this.compare = comparator || defaultcomparator;\n\t}\n\t\n\t// Add an element the the queue\n\t// runs in O(log n) time\n\tFastPriorityQueue.prototype.add = function (myval) {\n\t    var i = this.size;\n\t    this.array[this.size++] = myval;\n\t    while (i > 0) {\n\t        var p = i - 1 >> 1;\n\t        var ap = this.array[p];\n\t        if (!this.compare(myval, ap)) break;\n\t        this.array[i] = ap;\n\t        i = p;\n\t    }\n\t    this.array[i] = myval;\n\t};\n\t\n\t// replace the content of the heap by provided array and \"heapifies it\"\n\tFastPriorityQueue.prototype.heapify = function (arr) {\n\t    this.array = arr;\n\t    this.size = arr.length;\n\t    for (var i = this.size >> 1; i >= 0; i--) {\n\t        this._percolateDown(i);\n\t    }\n\t};\n\t\n\t// for internal use\n\tFastPriorityQueue.prototype._percolateUp = function (i) {\n\t    var myval = this.array[i];\n\t    while (i > 0) {\n\t        var p = i - 1 >> 1;\n\t        var ap = this.array[p];\n\t        if (!this.compare(myval, ap)) break;\n\t        this.array[i] = ap;\n\t        i = p;\n\t    }\n\t    this.array[i] = myval;\n\t};\n\t\n\t// for internal use\n\tFastPriorityQueue.prototype._percolateDown = function (i) {\n\t    var size = this.size;\n\t    var hsize = this.size >>> 1;\n\t    var ai = this.array[i];\n\t    while (i < hsize) {\n\t        var l = (i << 1) + 1;\n\t        var r = l + 1;\n\t        var bestc = this.array[l];\n\t        if (r < size) {\n\t            if (this.compare(this.array[r], bestc)) {\n\t                l = r;\n\t                bestc = this.array[r];\n\t            }\n\t        }\n\t        if (!this.compare(bestc, ai)) {\n\t            break;\n\t        }\n\t        this.array[i] = bestc;\n\t        i = l;\n\t    }\n\t    this.array[i] = ai;\n\t};\n\t\n\t// Look at the top of the queue (a smallest element)\n\t// executes in constant time\n\t//\n\t// This function assumes that the priority queue is\n\t// not empty and the caller is resposible for the check. \n\t// You can use an expression such as\n\t// \"isEmpty() ? undefined : peek()\"\n\t// if you expect to be calling peek on an empty priority queue.\n\t// \n\tFastPriorityQueue.prototype.peek = function (t) {\n\t    return this.array[0];\n\t};\n\t\n\t// remove the element on top of the heap (a smallest element)\n\t// runs in logarithmic time\n\t//\n\t//\n\t// This function assumes that the priority queue is\n\t// not empty, and the caller is responsible for the check. \n\t// You can use an expression such as\n\t// \"isEmpty() ? undefined : poll()\"\n\t// if you expect to be calling poll on an empty priority queue.\n\t//\n\t// For long-running and large priority queues, or priority queues\n\t// storing large objects, you may  want to call the trim function\n\t// at strategic times to recover allocated memory.\n\tFastPriorityQueue.prototype.poll = function (i) {\n\t    var ans = this.array[0];\n\t    if (this.size > 1) {\n\t        this.array[0] = this.array[--this.size];\n\t        this._percolateDown(0 | 0);\n\t    } else --this.size;\n\t    return ans;\n\t};\n\t\n\t// recover unused memory (for long-running priority queues)\n\tFastPriorityQueue.prototype.trim = function () {\n\t    this.array = this.array.slice(0, this.size);\n\t};\n\t\n\t// Check whether the heap is empty\n\tFastPriorityQueue.prototype.isEmpty = function (i) {\n\t    return this.size == 0;\n\t};\n\t\n\t// just for illustration purposes\n\tvar main = function main() {\n\t    // main code\n\t    var x = new FastPriorityQueue(function (a, b) {\n\t        return a < b;\n\t    });\n\t    x.add(1);\n\t    x.add(0);\n\t    x.add(5);\n\t    x.add(4);\n\t    x.add(3);\n\t    while (!x.isEmpty()) {\n\t        console.log(x.poll());\n\t    }\n\t};\n\t\n\tif (__webpack_require__.c[0] === module) {\n\t    main();\n\t}\n\t\n\tmodule.exports = FastPriorityQueue;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)(module)))\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t\tif (!module.webpackPolyfill) {\n\t\t\tmodule.deprecate = function () {};\n\t\t\tmodule.paths = [];\n\t\t\t// module.parent = undefined by default\n\t\t\tmodule.children = [];\n\t\t\tmodule.webpackPolyfill = 1;\n\t\t}\n\t\treturn module;\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _job = __webpack_require__(3);\n\t\n\tvar _job2 = _interopRequireDefault(_job);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Worker = function () {\n\t  function Worker(queue) {\n\t    var _this = this;\n\t\n\t    var _ref = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    var _ref$sleep = _ref.sleep;\n\t    var sleep = _ref$sleep === undefined ? 50 : _ref$sleep;\n\t    var _ref$max = _ref.max;\n\t    var max = _ref$max === undefined ? 8 : _ref$max;\n\t\n\t    _classCallCheck(this, Worker);\n\t\n\t    this.start = function () {\n\t      while (_this.available && _this.hasJob) {\n\t        _this.pending += 1;\n\t        var job = _this.queue.get();\n\t        _this.dispatch(_this.execute, job);\n\t      }\n\t\n\t      _this.queue.cleanup();\n\t      setTimeout(_this.start, _this.sleep);\n\t    };\n\t\n\t    this.execute = function (job) {\n\t      return _job2.default.invoke(job, _this.complete);\n\t    };\n\t\n\t    this.complete = function () {\n\t      _this.pending -= 1;\n\t    };\n\t\n\t    this.queue = queue;\n\t    this.sleep = sleep;\n\t    this.max = max;\n\t    this.pending = 0;\n\t\n\t    this.start();\n\t  }\n\t\n\t  _createClass(Worker, [{\n\t    key: 'dispatch',\n\t    value: function dispatch(func, job) {\n\t      return setTimeout(func, 0, job, this.complete);\n\t    }\n\t  }, {\n\t    key: 'available',\n\t    get: function get() {\n\t      return this.pending < this.max;\n\t    }\n\t  }, {\n\t    key: 'hasJob',\n\t    get: function get() {\n\t      return !this.queue.isEmpty();\n\t    }\n\t  }]);\n\t\n\t  return Worker;\n\t}();\n\t\n\texports.default = Worker;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar VersionTracker = function () {\n\t  function VersionTracker() {\n\t    _classCallCheck(this, VersionTracker);\n\t\n\t    this.initValue = 0;\n\t    this.map = {};\n\t  }\n\t\n\t  _createClass(VersionTracker, [{\n\t    key: \"get\",\n\t    value: function get(key) {\n\t      return this.map[key] || this.initValue;\n\t    }\n\t  }, {\n\t    key: \"set\",\n\t    value: function set(key, value) {\n\t      return this.map[key] = value;\n\t    }\n\t  }, {\n\t    key: \"inc\",\n\t    value: function inc(key) {\n\t      return this.set(key, this.get(key) + 1);\n\t    }\n\t  }]);\n\t\n\t  return VersionTracker;\n\t}();\n\t\n\texports.default = VersionTracker;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 229160c5d2b50f15cb87\n **/","module.exports = require('./orderly.js')\n\n\n/** WEBPACK FOOTER **\n ** ./index.js\n **/","import Job from './orderly/job'\nimport Queue from './orderly/queue'\nimport Worker from './orderly/worker'\nimport VersionTracker from './orderly/version_tracker'\n\nfunction Orderly(config = {}) {\n\n\n  // ============================================\n  // initialize environment\n  // ============================================\n\n  let queue = new Queue({ debug: config.debug })\n  let worker = new Worker(queue, config)\n  let versioning = new VersionTracker\n\n  // ============================================\n  // Private Functions\n  // ============================================\n\n  function filterSearchParams(url) {\n    return `${ url }`.replace(/\\?.*$/, '')\n  }\n\n  function buildAbort(abort) {\n    if (abort) return abort\n  }\n\n  function buildVersion(url, version) {\n    if (version === undefined) version = true\n\n    if (version) {\n      let key = filterSearchParams(url)\n      let next = versioning.inc(key)\n\n      return () => versioning.get(key) === next\n    }\n  }\n\n  function buildCancel(abort, url, version) {\n    abort = buildAbort(abort)\n    version = buildVersion(url, version)\n    return () => (version && !version()) || (abort && abort())\n  }\n\n  function isGoodRequest({ status }) {\n    return status >= 200 && status < 400\n  }\n\n  function buildJob(action, priority) {\n    return new Job({ action, priority })\n  }\n\n  function responseStatus(reject) {\n    return (resp) => isGoodRequest(resp) ? resp : reject(resp)\n  }\n\n  function responseType(type = 'text') {\n    return async (resp) => {\n      let body = await resp[type]()\n      return { ...resp, body }\n    }\n  }\n\n  function shouldCancel(cancel, reject) {\n    return (resp) => cancel() ? reject({ ...resp, cancelled: true }) : resp\n  }\n\n  function buildAction(url, options, resolve, reject) {\n    let { abort, type, version } = options\n    return () => {\n      return fetch(url, options)\n        .then(responseStatus(reject))\n        .then(shouldCancel(buildCancel(abort, url, version), reject))\n        .then(responseType(type))\n        .then(resolve)\n        .catch(reject)\n    }\n  }\n\n  // ============================================\n  // Public Functions\n  // ============================================\n\n  function ajax(url, options = {}) {\n    let { priority } = options\n    return new Promise((resolve, reject) => {\n      queue.add(\n        buildJob(\n          buildAction(url, options, resolve, reject),\n          priority\n        )\n      )\n    })\n  }\n\n  function get(url, options = {}) {\n    return ajax(url, { ...options, method: 'GET' })\n  }\n\n  function post(url, options = {}) {\n    return ajax(url, { ...options, method: 'POST' })\n  }\n\n  function put(url, options = {}) {\n    return ajax(url, { ...options, method: 'PUT' })\n  }\n\n  function del(url, options = {}) {\n    return ajax(url, { ...options, method: 'DELETE' })\n  }\n\n  return { ajax, get, post, put, del, versioning, queue, worker }\n}\n\nexport default Orderly\n\n\n/** WEBPACK FOOTER **\n ** ./orderly.js\n **/","class Job {\n  static counter = 0;\n\n  static invoke(job, callback) {\n    let q = job.run()\n\n    if (callback && typeof callback === 'function')\n      q.then(callback)\n\n    return q\n  }\n\n  log(job, action) {\n    let { id, priority } = job\n    console.info(`Orderly.Job: ${action}, id:${id}, priority:${priority}`)\n  }\n\n  constructor({ action, priority = 0, debug }) {\n    this.id = (Job.counter += 1)\n    this.action = action\n    this.priority = priority\n    this.debug = debug\n\n    this.log(this, 'Constructed')\n  }\n\n  run() {\n    if (this.debug) this.log(this, 'Invoking')\n    return this.action()\n  }\n}\n\nexport default Job\n\n\n\n/** WEBPACK FOOTER **\n ** ./orderly/job.js\n **/","import FastPriorityQueue from 'fastpriorityqueue'\nimport Job from './job'\n\nclass Queue {\n  constructor({ strategy = this.__defaultStrategy__, debug } = {}) {\n    this.q = new FastPriorityQueue(strategy)\n    this.debug = debug\n  }\n\n  add(obj) {\n    if (typeof obj === 'object' && obj.hasOwnProperty('action')) {\n      return this.q.add(obj)\n    }\n  }\n\n  get() {\n    if (this.debug) console.info('Orderly.Queue size: ', this.size())\n    return this.q.poll()\n  }\n\n  isEmpty() {\n    return this.q.isEmpty()\n  }\n\n  size() {\n    return this.q.size\n  }\n\n  cleanup() {\n    return this.q.trim()\n  }\n\n  __defaultStrategy__({ priority: x }, { priority: y }) {\n    return x !== undefined && x > y\n  }\n}\n\nexport default Queue\n\n\n\n/** WEBPACK FOOTER **\n ** ./orderly/queue.js\n **/","/**\n * FastPriorityQueue.js : a fast heap-based priority queue  in JavaScript.\n * (c) the authors\n * Licensed under the Apache License, Version 2.0.\n *\n * Speed-optimized heap-based priority queue for modern browsers and JavaScript engines.\n *\n * Usage :\n         Installation (in shell, if you use node):\n         $ npm install fastpriorityqueue\n\n         Running test program (in JavaScript):\n\n         // var FastPriorityQueue = require(\"fastpriorityqueue\");// in node\n         var x = new FastPriorityQueue();\n         x.add(1);\n         x.add(0);\n         x.add(5);\n         x.add(4);\n         x.add(3);\n         x.peek(); // should return 0, leaves x unchanged\n         x.size; // should return 5, leaves x unchanged\n         while(!x.isEmpty()) {\n           console.log(x.poll());\n         } // will print 0 1 3 4 5\n         x.trim(); // (optional) optimizes memory usage\n */\n'use strict';\n\nvar defaultcomparator = function(a, b) {\n    return a < b;\n};\n\n// the provided comparator function should take a, b and return *true* when a < b\nfunction FastPriorityQueue(comparator) {\n    this.array = [];\n    this.size = 0;\n    this.compare =  comparator || defaultcomparator;\n}\n\n\n// Add an element the the queue\n// runs in O(log n) time\nFastPriorityQueue.prototype.add = function(myval) {\n    var i = this.size;\n    this.array[this.size++] = myval;\n    while ( i > 0) {\n        var p = (i - 1) >> 1;\n        var ap = this.array[p];\n        if(!this.compare(myval, ap )) break;\n        this.array[i] = ap;\n        i = p;\n    }\n    this.array[i] = myval;\n};\n\n// replace the content of the heap by provided array and \"heapifies it\"\nFastPriorityQueue.prototype.heapify = function(arr) {\n    this.array = arr;\n    this.size = arr.length;\n    for (var i = (this.size >> 1); i >= 0; i--) {\n        this._percolateDown(i);\n    }\n};\n\n// for internal use\nFastPriorityQueue.prototype._percolateUp = function(i) {\n    var myval = this.array[i];\n    while ( i > 0) {\n        var p = (i - 1) >> 1;\n        var ap = this.array[p];\n        if(!this.compare(myval, ap )) break;\n        this.array[i] = ap;\n        i = p;\n    }\n    this.array[i] = myval;\n};\n\n\n// for internal use\nFastPriorityQueue.prototype._percolateDown = function(i) {\n    var size = this.size;\n    var hsize = this.size >>> 1;\n    var ai = this.array[i];\n    while (i < hsize) {\n        var l = (i << 1) + 1;\n        var r = l + 1;\n        var bestc = this.array[l];\n        if (r < size) {\n            if (this.compare(this.array[r], bestc)) {\n                l = r;\n                bestc = this.array[r];\n            }\n        }\n        if (!this.compare(bestc,ai)) {\n          break;\n        }\n        this.array[i] = bestc;\n        i = l;\n    }\n    this.array[i] = ai;\n};\n\n// Look at the top of the queue (a smallest element)\n// executes in constant time\n//\n// This function assumes that the priority queue is\n// not empty and the caller is resposible for the check. \n// You can use an expression such as\n// \"isEmpty() ? undefined : peek()\"\n// if you expect to be calling peek on an empty priority queue.\n// \nFastPriorityQueue.prototype.peek = function(t) {\n    return this.array[0];\n};\n\n// remove the element on top of the heap (a smallest element)\n// runs in logarithmic time\n//\n//\n// This function assumes that the priority queue is\n// not empty, and the caller is responsible for the check. \n// You can use an expression such as\n// \"isEmpty() ? undefined : poll()\"\n// if you expect to be calling poll on an empty priority queue.\n//\n// For long-running and large priority queues, or priority queues\n// storing large objects, you may  want to call the trim function\n// at strategic times to recover allocated memory.\nFastPriorityQueue.prototype.poll = function(i) {\n    var ans = this.array[0];\n    if(this.size>1) {\n        this.array[0] = this.array[--this.size];\n        this._percolateDown(0 | 0);\n    } else --this.size;\n    return ans;\n};\n\n\n// recover unused memory (for long-running priority queues)\nFastPriorityQueue.prototype.trim = function() {\n    this.array = this.array.slice(0,this.size);\n};\n\n// Check whether the heap is empty\nFastPriorityQueue.prototype.isEmpty = function(i) {\n    return this.size == 0;\n};\n\n// just for illustration purposes\nvar main = function() {\n    // main code\n    var x = new FastPriorityQueue(function(a, b) {\n        return a < b;\n    });\n    x.add(1);\n    x.add(0);\n    x.add(5);\n    x.add(4);\n    x.add(3);\n    while (!x.isEmpty()) {\n        console.log(x.poll());\n    }\n};\n\nif (require.main === module) {\n    main();\n}\n\nmodule.exports = FastPriorityQueue;\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/fastpriorityqueue/FastPriorityQueue.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ../~/webpack/buildin/module.js\n **/","import Job from './job'\n\nclass Worker {\n  constructor(queue, { sleep = 50, max = 8 } = {}) {\n    this.queue = queue\n    this.sleep = sleep\n    this.max = max\n    this.pending = 0\n\n    this.start()\n  }\n\n  start = () => {\n    while (this.available && this.hasJob) {\n      this.pending += 1\n      let job = this.queue.get()\n      this.dispatch(this.execute, job)\n    }\n\n    this.queue.cleanup()\n    setTimeout(this.start, this.sleep)\n  }\n\n  dispatch(func, job) {\n    return setTimeout(func, 0, job, this.complete)\n  }\n\n  execute = (job) => {\n    return Job.invoke(job, this.complete)\n  }\n\n  complete = () => {\n    this.pending -= 1\n  }\n\n  get available() {\n    return this.pending < this.max\n  }\n\n  get hasJob() {\n    return !this.queue.isEmpty()\n  }\n}\n\nexport default Worker\n\n\n\n/** WEBPACK FOOTER **\n ** ./orderly/worker.js\n **/","class VersionTracker {\n  constructor() {\n    this.initValue = 0\n    this.map = {}\n  }\n\n  get(key) {\n    return this.map[key] || this.initValue\n  }\n\n  set(key, value) {\n    return this.map[key] = value\n  }\n\n  inc(key) {\n    return this.set(key, this.get(key) + 1)\n  }\n}\n\nexport default VersionTracker\n\n\n/** WEBPACK FOOTER **\n ** ./orderly/version_tracker.js\n **/"],"sourceRoot":""}